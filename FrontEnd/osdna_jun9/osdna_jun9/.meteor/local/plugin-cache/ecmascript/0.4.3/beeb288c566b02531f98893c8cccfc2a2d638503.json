{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/client/lib/main.js","filenameRelative":"/client/lib/main.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/client/lib/main.js.map","sourceFileName":"/client/lib/main.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"main"},"ignored":false,"code":"d3Graph = {\n    color: '',\n    zoomer: function () {\n        function zoomer() {\n            var width = 500,\n                height = 500;\n            var xScale = d3.scale.linear().domain([0, width]).range([0, width]);\n            var yScale = d3.scale.linear().domain([0, height]).range([0, height]);\n            return d3.behavior.zoom().scaleExtent([0.1, 10]).x(xScale).y(yScale).on(\"zoomstart\", zoomstart).on(\"zoom\", redraw);\n        }\n\n        return zoomer;\n    }(),\n    svg: '',\n    force: '',\n    link: '',\n    node: '',\n    linkText: '',\n    graph: {\n        nodes: [],\n        links: []\n    },\n    zoomstart: function () {\n        function zoomstart() {\n            node.each(function (d) {\n                d.selected = false;\n                d.previouslySelected = false;\n            });\n            node.classed(\"selected\", false);\n        }\n\n        return zoomstart;\n    }(),\n    getGraphData: function () {\n        function getGraphData(nodeId) {\n\n            var invNodes = Inventory.find({ \"type\": \"instance\", $and: [{ \"host\": nodeId }] });\n\n            var edges = [];\n            var nodes = [];\n\n            invNodes.forEach(function (n) {\n                nodes = n[\"Entities\"];\n                edges = n[\"Relations\"];\n            });\n\n            nodes.forEach(function (n) {\n                n.name = n.label;\n            });\n\n            var edges_new = [];\n            edges.forEach(function (e) {\n                var sourceNode = nodes.filter(function (n) {\n                    return n.id === e.from;\n                })[0],\n                    targetNode = nodes.filter(function (n) {\n                    return n.id === e.to;\n                })[0];\n\n                edges_new.push({ source: sourceNode, target: targetNode, value: 1, label: e.label, attributes: e.attributes });\n            });\n            //any links with duplicate source and target get an incremented 'linknum'\n            for (var i = 0; i < edges_new.length; i++) {\n                if (i != 0 && edges_new[i].source == edges_new[i - 1].source && edges_new[i].target == edges_new[i - 1].target) {\n                    edges_new[i].linknum = edges_new[i - 1].linknum + 1;\n                } else {\n                    edges_new[i].linknum = 1;\n                };\n            };\n            //var graph = {};\n            this.graph.nodes = nodes;\n            this.graph.links = edges_new;\n        }\n\n        return getGraphData;\n    }(),\n    getGraphDataByClique: function () {\n        function getGraphDataByClique(nodeObjId) {\n            var cliques = Cliques.find({ focal_point: new Mongo.ObjectID(nodeObjId) }).fetch();\n            var cliquesLinks = [];\n            var nodes = [];\n            var edges_new = [];\n\n            cliques.forEach(function (n) {\n                cliquesLinks.push(n[\"link_id\"]);\n            });\n            var linksList = Links.find({ _id: { $in: cliquesLinks } }).fetch();\n            console.log(linksList);\n\n            linksList.forEach(function (linkItem) {\n                nodes.push(linkItem[\"source\"]);\n                nodes.push(linkItem[\"target\"]);\n            });\n            var nodesList = Inventory.find({ _id: { $in: nodes } }).fetch();\n            linksList.forEach(function (linkItem) {\n                var sourceNode = nodesList.filter(function (n) {\n                    return n._id._str === linkItem.source._str;\n                })[0],\n                    targetNode = nodesList.filter(function (n) {\n                    return n._id._str === linkItem.target._str;\n                })[0];\n\n                edges_new.push({ source: sourceNode, target: targetNode, value: 1, label: linkItem.link_name, attributes: linkItem });\n            });\n            nodesList.forEach(function (nodeItem) {\n                nodeItem.attributes = [];\n                var attrHoverFields = NodeHoverAttr.find({ \"type\": nodeItem[\"type\"] }).fetch();\n                if (attrHoverFields.length) {\n                    attrHoverFields[0].attributes.forEach(function (field) {\n                        if (nodeItem[field]) {\n                            var object = {};\n                            object[field] = nodeItem[field];\n                            nodeItem.attributes.push(object);\n                        }\n                    });\n                }\n            });\n\n            this.graph.nodes = nodesList;\n            this.graph.links = edges_new;\n        }\n\n        return getGraphDataByClique;\n    }(),\n    creategraphdata: function () {\n        function creategraphdata() {\n            var self = this;\n            var width = 500,\n                height = 500;\n\n            this.color = d3.scale.category20();\n            /*\r\n                    this.svg = d3.select(\"#dgraphid\").append(\"svg\")\r\n                        .attr(\"width\", \"100%\")\r\n                        .attr(\"height\", \"100%\")\r\n                        .attr(\"pointer-events\", \"all\")\r\n                        //.attr('transform', 'translate(250,250) scale(0.3)')\r\n                        .call(d3.behavior.zoom().on(\"zoom\", this.redraw))\r\n                        .append('svg:g');\r\n            \r\n                    //.append(\"g\");\r\n            \r\n                    this.force = cola.d3adaptor().convergenceThreshold(0.1)\r\n                        //.linkDistance(200)\r\n                        .size([width, height]);\r\n            */\n            var focused = null;\n\n            this.force = cola.d3adaptor().convergenceThreshold(0.1)\n            //.linkDistance(200)\n            .size([width, height]);\n\n            var outer = d3.select(\"#dgraphid\").append(\"svg\").attr({ width: \"100%\", height: \"100%\", \"pointer-events\": \"all\" });\n\n            outer.append('rect').attr({ \"class\": 'background', width: \"100%\", height: \"100%\" }).call(d3.behavior.zoom().on(\"zoom\", function (d) {\n                d3Graph.svg.attr(\"transform\", \"translate(\" + d3.event.translate + \")\" + \" scale(\" + d3.event.scale + \")\");\n            })).on(\"mouseover\", function () {\n                focused = this;\n            });\n\n            d3.select(\"body\").on(\"keydown\", function () {\n                d3.select(focused); /* then do something with it here */\n            });\n\n            this.svg = outer.append('g').attr('transform', 'translate(250,250) scale(0.3)');\n        }\n\n        return creategraphdata;\n    }(),\n    redraw: function () {\n        function redraw() {\n            console.log(\"here\", d3.event.translate, d3.event.scale);\n\n            d3Graph.svg.attr(\"transform\", \"translate(\" + d3.event.translate + \")\" + \" scale(\" + d3.event.scale + \")\");\n        }\n\n        return redraw;\n    }(),\n\n    updateNetworkGraph: function () {\n        function updateNetworkGraph() {\n            var self = this;\n\n            this.svg.selectAll('g').remove();\n            //this.svg.exit().remove();\n\n            var div = d3.select(\"body\").append(\"div\").attr(\"class\", \"tooltip\").style(\"opacity\", 0);\n\n            this.force.nodes(this.graph.nodes).links(this.graph.links).symmetricDiffLinkLengths(250)\n            //.jaccardLinkLengths(300)\n            //.jaccardLinkLengths(80,0.7)\n            .handleDisconnected(true).avoidOverlaps(true).start(50, 100, 200);\n\n            /*\r\n                        this.force\r\n                        .on(\"dragstart\", function (d) { d3.event.sourceEvent.stopPropagation(); d3.select(this).classed(\"dragging\", true); } )\r\n                        .on(\"drag\", function (d) { d3.select(this).attr(\"cx\", d.x = d3.event.x).attr(\"cy\", d.y = d3.event.y); } )\r\n                        .on(\"dragend\", function (d) { d3.select(this).classed(\"dragging\", false); });\r\n            */\n\n            // Define the div for the tooltip\n\n            //svg.exit().remove();\n            //graph.constraints = [{\"axis\":\"y\", \"left\":0, \"right\":1, \"gap\":25},];\n\n            //.start(10,15,20);\n            /*var path = svg.append(\"svg:g\")\r\n                .selectAll(\"path\")\r\n                .data(force.links())\r\n                .enter().append(\"svg:path\")\r\n                .attr(\"class\", \"link\");;\r\n            */\n            var link = this.svg.selectAll(\".link\").data(this.force.links()).enter().append(\"g\").attr(\"class\", \"link-group\").append(\"line\").attr(\"class\", \"link\").style(\"stroke-width\", function (d) {\n                return Math.sqrt(d.stroke);\n            }).style(\"stroke\", function (d) {\n                if (d.label == 'net-103') {\n                    self.blinkLink(d);\n                    return \"red\";\n                }\n                //return self.color(d.level);\n            });\n\n            var linkText = this.svg.selectAll(\".link-group\").append(\"text\").data(this.force.links()).text(function (d) {\n                return d.label;\n            }).attr(\"x\", function (d) {\n                return d.source.x + (d.target.x - d.source.x) * 0.5;\n            }).attr(\"y\", function (d) {\n                return d.source.y + (d.target.y - d.source.y) * 0.5;\n            }).attr(\"dy\", \".25em\").attr(\"text-anchor\", \"right\").on(\"mouseover\", function (d) {\n                div.transition().duration(200).style(\"opacity\", .9);\n                d.title = \"\";\n                if (d.attributes != undefined) {\n                    d.title = JSON.stringify(d.attributes, null, 4).toString().replace(/\\,/g, '<BR>').replace(/\\[/g, '').replace(/\\]/g, '').replace(/\\{/g, '').replace(/\\}/g, '').replace(/\"/g, '');\n                }\n                div.html(\"<p><u>\" + d.label + \"</u><br/>\" + d.title + \"<p/>\").style(\"left\", d3.event.pageX + \"px\").style(\"top\", d3.event.pageY - 28 + \"px\");\n            }).on(\"mouseout\", function (d) {\n                div.transition().duration(500).style(\"opacity\", 0);\n            });\n\n            var node = this.svg.selectAll(\".node\").data(this.force.nodes()).enter().append(\"g\").attr(\"class\", \"node\").call(this.force.drag);\n\n            node.append(\"circle\").attr(\"class\", \"node\").attr(\"r\", function (d) {\n                return 13;\n            }).on(\"mouseover\", function (d) {\n                div.transition().duration(200).style(\"opacity\", .9);\n                d.title = \"\";\n                if (d.attributes != undefined) {\n                    d.title = JSON.stringify(d.attributes, null, 4).toString().replace(/\\,/g, '<BR>').replace(/\\[/g, '').replace(/\\]/g, '').replace(/\\{/g, '').replace(/\\}/g, '').replace(/\"/g, '');\n                }\n\n                div.html(\"<p><u>\" + d.name + \"</u><br/>\" + d.title + \"<p/>\").style(\"left\", d3.event.pageX + \"px\").style(\"top\", d3.event.pageY - 28 + \"px\");\n            }).on(\"mouseout\", function (d) {\n                div.transition().duration(500).style(\"opacity\", 0);\n            }).style(\"fill\", function (d) {\n                if (d.level == 2) {\n                    self.blinkNode(d);\n                    return \"red\";\n                }\n\n                return self.color(d.group);\n            }).call(this.force.drag);\n\n            /*\r\n                        .each(function() {\r\n                            var sel = d3.select(this);\r\n                            var state = false;\r\n                            sel.on('dblclick', function () {\r\n                                state = !state;\r\n                                if (state) {\r\n                                    sel.style('fill', 'black');\r\n                                } else {\r\n                                    sel.style('fill', function (d) {\r\n                                        return d.colr;\r\n                                    });\r\n                                }\r\n                            });\r\n                        });\r\n            */\n\n            node.append(\"text\").attr(\"dx\", 14).attr(\"dy\", \".35em\").text(function (d) {\n                return d.object_name;\n            });\n\n            this.force.on(\"tick\", function () {\n                link.attr(\"x1\", function (d) {\n                    return d.source.x;\n                }).attr(\"y1\", function (d) {\n                    return d.source.y;\n                }).attr(\"x2\", function (d) {\n                    return d.target.x;\n                }).attr(\"y2\", function (d) {\n                    return d.target.y;\n                });\n                /*\r\n                                .attr(\"dr1\", function(d) { return 75/d.source.linknum; })\r\n                                .attr(\"dr2\", function(d) { return 75/d.target.linknum; });\r\n                */\n\n                node.attr(\"transform\", function (d) {\n                    return \"translate(\" + d.x + \",\" + d.y + \")\";\n                });\n\n                linkText.attr(\"x\", function (d) {\n                    return d.source.x + (d.target.x - d.source.x) * 0.5;\n                }).attr(\"y\", function (d) {\n                    return d.source.y + (d.target.y - d.source.y) * 0.5;\n                });\n            });\n        }\n\n        return updateNetworkGraph;\n    }(),\n    centerview: function () {\n        function centerview() {\n            // Center the view on the molecule(s) and scale it so that everything\n            // fits in the window\n            var width = 500,\n                height = 500;\n\n            if (nodeGraph === null) return;\n\n            var nodes = nodeGraph.nodes;\n\n            //no molecules, nothing to do\n            if (nodes.length === 0) return;\n\n            // Get the bounding box\n            min_x = d3.min(nodes.map(function (d) {\n                return d.x;\n            }));\n            min_y = d3.min(nodes.map(function (d) {\n                return d.y;\n            }));\n\n            max_x = d3.max(nodes.map(function (d) {\n                return d.x;\n            }));\n            max_y = d3.max(nodes.map(function (d) {\n                return d.y;\n            }));\n\n            // The width and the height of the graph\n            mol_width = max_x - min_x;\n            mol_height = max_y - min_y;\n\n            // how much larger the drawing area is than the width and the height\n            width_ratio = width / mol_width;\n            height_ratio = height / mol_height;\n\n            // we need to fit it in both directions, so we scale according to\n            // the direction in which we need to shrink the most\n            min_ratio = Math.min(width_ratio, height_ratio) * 0.8;\n\n            // the new dimensions of the molecule\n            new_mol_width = mol_width * min_ratio;\n            new_mol_height = mol_height * min_ratio;\n\n            // translate so that it's in the center of the window\n            x_trans = -min_x * min_ratio + (width - new_mol_width) / 2;\n            y_trans = -min_y * min_ratio + (height - new_mol_height) / 2;\n\n            // do the actual moving\n            this.svg.attr(\"transform\", \"translate(\" + [x_trans, y_trans] + \")\" + \" scale(\" + min_ratio + \")\");\n\n            // tell the zoomer what we did so that next we zoom, it uses the\n            // transformation we entered here\n            this.zoomer.translate([x_trans, y_trans]);\n            this.zoomer.scale(min_ratio);\n        }\n\n        return centerview;\n    }(),\n    keydown: function () {\n        function keydown() {\n            shiftKey = d3.event.shiftKey || d3.event.metaKey;\n            ctrlKey = d3.event.ctrlKey;\n\n            console.log('d3.event', d3.event);\n\n            if (d3.event.keyCode == 67) {\n                //the 'c' key\n                this.centerview();\n            }\n        }\n\n        return keydown;\n    }(),\n    blinkNode: function () {\n        function blinkNode(node) {\n            var nodeList = this.svg.selectAll(\".node\");\n            var selected = nodeList.filter(function (d, i) {\n                return d.id == node.id;\n                //return d.name != findFromParent;\n            });\n            selected.forEach(function (n) {\n                for (i = 0; i != 30; i++) {\n                    $(n[1]).fadeTo('slow', 0.1).fadeTo('slow', 5.0);\n                };\n            });\n        }\n\n        return blinkNode;\n    }(),\n    blinkLink: function () {\n        function blinkLink(link) {\n            var linkList = this.svg.selectAll(\".link\");\n            var selected = linkList.filter(function (d, i) {\n                return d.id == link.id;\n                //return d.name != findFromParent;\n            });\n            selected.forEach(function (n) {\n                for (i = 0; i != 30; i++) {\n                    $(n[1]).fadeTo('slow', 0.1).fadeTo('slow', 5.0);\n                };\n            });\n        }\n\n        return blinkLink;\n    }(),\n    tick: function () {\n        function tick(obj) {\n\n            obj.link.attr(\"x1\", function (d) {\n                return d.source.x;\n            }).attr(\"y1\", function (d) {\n                return d.source.y;\n            }).attr(\"x2\", function (d) {\n                return d.target.x;\n            }).attr(\"y2\", function (d) {\n                return d.target.y;\n            });\n\n            obj.node.attr(\"transform\", function (d) {\n                return \"translate(\" + d.x + \",\" + d.y + \")\";\n            });\n\n            obj.linkText.attr(\"x\", function (d) {\n                return d.source.x + (d.target.x - d.source.x) * 0.5;\n            }).attr(\"y\", function (d) {\n                return d.source.y + (d.target.y - d.source.y) * 0.5;\n            });\n        }\n\n        return tick;\n    }()\n};\nmenuTree = {\n    menu: {},\n    init: function () {\n        function init() {\n            this.memu = $('#menu').multilevelpushmenu({\n                menuWidth: '20%',\n                menuHeight: '94%',\n                containersToPush: [$('#pushobj')],\n                overlapWidth: 40,\n                backItemIcon: 'fa fa-angle-left',\n                groupIcon: 'fa fa-angle-right',\n                onItemClick: function () {\n                    function onItemClick() {\n                        var event = arguments[0],\n                            $menuLevelHolder = arguments[1],\n                            $item = arguments[2],\n                            options = arguments[3],\n                            title = $menuLevelHolder.find('h2:first').text(),\n                            itemName = $item.find('a:first').text();\n                        console.log(arguments);\n                        console.log($item[0]);\n                        if ($item[0].type == \"host_ref\" && $item[0].title == 'node-24') {\n                            if ($item.level > 1) {\n                                var itemList = $('#menu').multilevelpushmenu('pathtoroot', $item);\n                                $('.breadcrumb li').remove();\n                                itemList.forEach(function (e) {\n                                    if (e.firstChild.innerText != '' && e.firstChild.innerText != undefined) {\n                                        $('.breadcrumb').append('<li><a href=\"#\">' + e.firstChild.innerText + '</a></li>');\n                                    }\n                                });\n                                $('.breadcrumb').append('<li class=\"active\">' + itemName + '</li>');\n                            }\n\n                            Session.set('currNodeId', $item[0].id);\n                            var graphData = d3Graph.getGraphData($item[0].id);\n                            d3Graph.updateNetworkGraph(graphData);\n                            /*\r\n                             myfunc = Template.multilevelorig.__helpers.get(\"getNodeItems\");\r\n                             myfunc($item[0].id);\r\n                             */\n                        } else if ($item.attr(\"clique\") == \"true\") {\n                                var graphData = d3Graph.getGraphDataByClique($item.attr(\"objId\"));\n                                //console.log($item[0].objId);\n                            }\n                        //console.log($item.find( 'a:first' ));\n                    }\n\n                    return onItemClick;\n                }(),\n                onGroupItemClick: function () {\n                    function onGroupItemClick() {\n                        var event = arguments[0],\n                            $menuLevelHolder = arguments[1],\n                            $item = arguments[2],\n                            options = arguments[3],\n                            title = $menuLevelHolder.find('h2:first').text(),\n                            itemName = $item.find('a:first').text();\n\n                        console.log($item);\n                        if ($item.attr(\"clique\") == \"true\") {\n                            var graphData = d3Graph.getGraphDataByClique($item.attr(\"objId\"));\n                            d3Graph.updateNetworkGraph(graphData);\n                            console.log($item.attr(\"objId\"));\n                        }\n                    }\n\n                    return onGroupItemClick;\n                }()\n            });\n        }\n\n        return init;\n    }()\n};","ast":null,"map":{"version":3,"sources":["/client/lib/main.js"],"names":[],"mappings":"AAAA,UAAU;AACN,WAAM,EAAN;AACA;AAAO,0BAAU;AACb,gBAAI,QAAQ,GAAR;gBACA,SAAS,GAAT,CAFS;AAGb,gBAAI,SAAS,GAAG,KAAH,CAAS,MAAT,GACR,MADQ,CACD,CAAC,CAAD,EAAG,KAAH,CADC,EACU,KADV,CACgB,CAAC,CAAD,EAAG,KAAH,CADhB,CAAT,CAHS;AAKb,gBAAI,SAAS,GAAG,KAAH,CAAS,MAAT,GACR,MADQ,CACD,CAAC,CAAD,EAAG,MAAH,CADC,EACW,KADX,CACiB,CAAC,CAAD,EAAI,MAAJ,CADjB,CAAT,CALS;AAOb,mBAAO,GAAG,QAAH,CAAY,IAAZ,GACP,WADO,CACK,CAAC,GAAD,EAAK,EAAL,CADL,EAEP,CAFO,CAEL,MAFK,EAGP,CAHO,CAGL,MAHK,EAIP,EAJO,CAIJ,WAJI,EAIS,SAJT,EAKP,EALO,CAKJ,MALI,EAKI,MALJ,CAAP,CAPa;SAAV;;;OAAP;AAcA,SAAI,EAAJ;AACA,WAAM,EAAN;AACA,UAAK,EAAL;AACA,UAAK,EAAL;AACA,cAAS,EAAT;AACA,WAAM;AACF,eAAM,EAAN;AACA,eAAM,EAAN;KAFJ;AAIA;AAAU,6BAAY;AAClB,iBAAK,IAAL,CAAU,UAAS,CAAT,EAAY;AAClB,kBAAE,QAAF,GAAa,KAAb,CADkB;AAElB,kBAAE,kBAAF,GAAuB,KAAvB,CAFkB;aAAZ,CAAV,CADkB;AAKlB,iBAAK,OAAL,CAAa,UAAb,EAAyB,KAAzB,EALkB;SAAZ;;;OAAV;AAOA;AAAa,8BAAS,MAAT,EAAgB;;AAEzB,gBAAI,WAAW,UAAU,IAAV,CAAe,EAAE,QAAQ,UAAR,EAAoB,MAAM,CAAE,EAAE,QAAQ,MAAR,EAAJ,CAAN,EAArC,CAAX,CAFqB;;AAIzB,gBAAI,QAAQ,EAAR,CAJqB;AAKzB,gBAAI,QAAQ,EAAR,CALqB;;AAOzB,qBAAS,OAAT,CAAiB,UAAS,CAAT,EAAW;AACxB,wBAAS,EAAE,UAAF,CAAT,CADwB;AAExB,wBAAS,EAAE,WAAF,CAAT,CAFwB;aAAX,CAAjB,CAPyB;;AAYzB,kBAAM,OAAN,CAAc,UAAS,CAAT,EAAW;AACrB,kBAAE,IAAF,GAAS,EAAE,KAAF,CADY;aAAX,CAAd,CAZyB;;AAgBzB,gBAAI,YAAY,EAAZ,CAhBqB;AAiBzB,kBAAM,OAAN,CAAc,UAAS,CAAT,EAAY;AACtB,oBAAI,aAAa,MAAM,MAAN,CAAa,UAAS,CAAT,EAAY;AAAE,2BAAO,EAAE,EAAF,KAAS,EAAE,IAAF,CAAlB;iBAAZ,CAAb,CAAsD,CAAtD,CAAb;oBACA,aAAa,MAAM,MAAN,CAAa,UAAS,CAAT,EAAY;AAAE,2BAAO,EAAE,EAAF,KAAS,EAAE,EAAF,CAAlB;iBAAZ,CAAb,CAAoD,CAApD,CAAb,CAFkB;;AAItB,0BAAU,IAAV,CAAe,EAAC,QAAQ,UAAR,EAAoB,QAAQ,UAAR,EAAoB,OAAO,CAAP,EAAS,OAAO,EAAE,KAAF,EAAQ,YAAY,EAAE,UAAF,EAA5F,EAJsB;aAAZ,CAAd;;AAjByB,iBAwBpB,IAAI,IAAE,CAAF,EAAK,IAAE,UAAU,MAAV,EAAkB,GAAlC,EAAuC;AACnC,oBAAI,KAAK,CAAL,IACA,UAAU,CAAV,EAAa,MAAb,IAAuB,UAAU,IAAE,CAAF,CAAV,CAAe,MAAf,IACvB,UAAU,CAAV,EAAa,MAAb,IAAuB,UAAU,IAAE,CAAF,CAAV,CAAe,MAAf,EAAuB;AAC9C,8BAAU,CAAV,EAAa,OAAb,GAAuB,UAAU,IAAE,CAAF,CAAV,CAAe,OAAf,GAAyB,CAAzB,CADuB;iBAFlD,MAKK;AAAC,8BAAU,CAAV,EAAa,OAAb,GAAuB,CAAvB,CAAD;iBALL,CADmC;aAAvC;;AAxByB,gBAiCzB,CAAK,KAAL,CAAW,KAAX,GAAmB,KAAnB,CAjCyB;AAkCzB,iBAAK,KAAL,CAAW,KAAX,GAAmB,SAAnB,CAlCyB;SAAhB;;;OAAb;AAqCA;AAAqB,sCAAS,SAAT,EAAmB;AACpC,gBAAI,UAAU,QAAQ,IAAR,CAAa,EAAE,aAAa,IAAI,MAAM,QAAN,CAAe,SAAnB,CAAb,EAAf,EAA6D,KAA7D,EAAV,CADgC;AAEpC,gBAAI,eAAe,EAAf,CAFgC;AAGpC,gBAAI,QAAQ,EAAR,CAHgC;AAIpC,gBAAI,YAAY,EAAZ,CAJgC;;AAMpC,oBAAQ,OAAR,CAAgB,UAAS,CAAT,EAAW;AACtB,6BAAa,IAAb,CAAkB,EAAE,SAAF,CAAlB,EADsB;aAAX,CAAhB,CANoC;AASpC,gBAAI,YAAY,MAAM,IAAN,CAAW,EAAE,KAAK,EAAC,KAAK,YAAL,EAAN,EAAb,EAAwC,KAAxC,EAAZ,CATgC;AAUpC,oBAAQ,GAAR,CAAY,SAAZ,EAVoC;;AAYpC,sBAAU,OAAV,CAAkB,UAAS,QAAT,EAAkB;AAChC,sBAAM,IAAN,CAAW,SAAS,QAAT,CAAX,EADgC;AAEhC,sBAAM,IAAN,CAAW,SAAS,QAAT,CAAX,EAFgC;aAAlB,CAAlB,CAZoC;AAgBpC,gBAAI,YAAY,UAAU,IAAV,CAAe,EAAE,KAAK,EAAC,KAAK,KAAL,EAAN,EAAjB,EAAqC,KAArC,EAAZ,CAhBgC;AAiBpC,sBAAU,OAAV,CAAkB,UAAS,QAAT,EAAkB;AAChC,oBAAI,aAAa,UAAU,MAAV,CAAiB,UAAS,CAAT,EAAY;AAAE,2BAAO,EAAE,GAAF,CAAM,IAAN,KAAe,SAAS,MAAT,CAAgB,IAAhB,CAAxB;iBAAZ,CAAjB,CAA8E,CAA9E,CAAb;oBACA,aAAa,UAAU,MAAV,CAAiB,UAAS,CAAT,EAAY;AAAE,2BAAO,EAAE,GAAF,CAAM,IAAN,KAAe,SAAS,MAAT,CAAgB,IAAhB,CAAxB;iBAAZ,CAAjB,CAA8E,CAA9E,CAAb,CAF4B;;AAIhC,0BAAU,IAAV,CAAe,EAAC,QAAQ,UAAR,EAAoB,QAAQ,UAAR,EAAoB,OAAO,CAAP,EAAS,OAAO,SAAS,SAAT,EAAmB,YAAY,QAAZ,EAA3F,EAJgC;aAAlB,CAAlB,CAjBoC;AAwBpC,sBAAU,OAAV,CAAkB,UAAS,QAAT,EAAkB;AAChC,yBAAS,UAAT,GAAsB,EAAtB,CADgC;AAEhC,oBAAI,kBAAkB,cAAc,IAAd,CAAmB,EAAE,QAAQ,SAAS,MAAT,CAAR,EAArB,EAAgD,KAAhD,EAAlB,CAF4B;AAGhC,oBAAG,gBAAgB,MAAhB,EAAuB;AACtB,oCAAgB,CAAhB,EAAmB,UAAnB,CAA8B,OAA9B,CAAsC,UAAS,KAAT,EAAe;AACjD,4BAAG,SAAS,KAAT,CAAH,EAAmB;AACf,gCAAI,SAAS,EAAT,CADW;AAEf,mCAAO,KAAP,IAAgB,SAAS,KAAT,CAAhB,CAFe;AAGf,qCAAS,UAAT,CAAoB,IAApB,CAAyB,MAAzB,EAHe;yBAAnB;qBADkC,CAAtC,CADsB;iBAA1B;aAHc,CAAlB,CAxBoC;;AAsCpC,iBAAK,KAAL,CAAW,KAAX,GAAmB,SAAnB,CAtCoC;AAuCpC,iBAAK,KAAL,CAAW,KAAX,GAAmB,SAAnB,CAvCoC;SAAnB;;;OAArB;AA0CA;AAAiB,mCAAW;AACxB,gBAAI,OAAO,IAAP,CADoB;AAExB,gBAAI,QAAQ,GAAR;gBACA,SAAS,GAAT,CAHoB;;AAKxB,iBAAK,KAAL,GAAa,GAAG,KAAH,CAAS,UAAT,EAAb;;;;;;;;;;;;;;;;AALwB,gBAqBpB,UAAU,IAAV,CArBoB;;AAuBxB,iBAAK,KAAL,GAAa,KAAK,SAAL,GAAiB,oBAAjB,CAAsC,GAAtC;;aAER,IAFQ,CAEH,CAAC,KAAD,EAAQ,MAAR,CAFG,CAAb,CAvBwB;;AA2BxB,gBAAI,QAAQ,GAAG,MAAH,CAAU,WAAV,EACP,MADO,CACA,KADA,EAEP,IAFO,CAEF,EAAE,OAAO,MAAP,EAAe,QAAQ,MAAR,EAAgB,kBAAkB,KAAlB,EAF/B,CAAR,CA3BoB;;AA+BxB,kBAAM,MAAN,CAAa,MAAb,EACK,IADL,CACU,EAAE,SAAO,YAAP,EAAqB,OAAO,MAAP,EAAe,QAAQ,MAAR,EADhD,EAEK,IAFL,CAEU,GAAG,QAAH,CAAY,IAAZ,GAAmB,EAAnB,CAAsB,MAAtB,EAA8B,UAAS,CAAT,EAAY;AAC5C,wBAAQ,GAAR,CAAY,IAAZ,CAAiB,WAAjB,EAA8B,eAAe,GAAG,KAAH,CAAS,SAAT,GAAqB,GAApC,GAA0C,SAA1C,GAAsD,GAAG,KAAH,CAAS,KAAT,GAAiB,GAAvE,CAA9B,CAD4C;aAAZ,CAFxC,EAKK,EALL,CAKQ,WALR,EAKqB,YAAY;AAAE,0BAAU,IAAV,CAAF;aAAZ,CALrB,CA/BwB;;AAsCxB,eAAG,MAAH,CAAU,MAAV,EAAkB,EAAlB,CAAqB,SAArB,EAAgC,YAAY;AAAE,mBAAG,MAAH,CAAU,OAAV,uCAAF;aAAZ,CAAhC,CAtCwB;;AAwCxB,iBAAK,GAAL,GAAW,MACN,MADM,CACC,GADD,EAEN,IAFM,CAED,WAFC,EAEY,+BAFZ,CAAX,CAxCwB;SAAX;;;OAAjB;AA6CA;AAAQ,0BAAU;AACd,oBAAQ,GAAR,CAAY,MAAZ,EAAoB,GAAG,KAAH,CAAS,SAAT,EAAoB,GAAG,KAAH,CAAS,KAAT,CAAxC,CADc;;AAGd,oBAAQ,GAAR,CAAY,IAAZ,CAAiB,WAAjB,EACI,eAAe,GAAG,KAAH,CAAS,SAAT,GAAqB,GAApC,GACE,SADF,GACc,GAAG,KAAH,CAAS,KAAT,GAAiB,GAD/B,CADJ,CAHc;SAAV;;;OAAR;;AASA;AAAmB,sCAAW;AAC1B,gBAAI,OAAO,IAAP,CADsB;;AAG1B,iBAAK,GAAL,CAAS,SAAT,CAAmB,GAAnB,EAAwB,MAAxB;;;AAH0B,gBAMtB,MAAM,GAAG,MAAH,CAAU,MAAV,EAAkB,MAAlB,CAAyB,KAAzB,EACL,IADK,CACA,OADA,EACS,SADT,EAEL,KAFK,CAEC,SAFD,EAEY,CAFZ,CAAN,CANsB;;AAU1B,iBAAK,KAAL,CACK,KADL,CACW,KAAK,KAAL,CAAW,KAAX,CADX,CAEK,KAFL,CAEW,KAAK,KAAL,CAAW,KAAX,CAFX,CAGK,wBAHL,CAG8B,GAH9B;;;aAMK,kBANL,CAMwB,IANxB,EAOK,aAPL,CAOmB,IAPnB,EAQK,KARL,CAQW,EARX,EAQe,GARf,EAQoB,GARpB;;;;;;;;;;;;;;;;;;;;;AAV0B,gBAwCtB,OAAO,KAAK,GAAL,CAAS,SAAT,CAAmB,OAAnB,EACN,IADM,CACD,KAAK,KAAL,CAAW,KAAX,EADC,EAEN,KAFM,GAGN,MAHM,CAGC,GAHD,EAIN,IAJM,CAID,OAJC,EAIQ,YAJR,EAKN,MALM,CAKC,MALD,EAMN,IANM,CAMD,OANC,EAMQ,MANR,EAON,KAPM,CAOA,cAPA,EAOgB,UAAS,CAAT,EAAY;AAAE,uBAAO,KAAK,IAAL,CAAU,EAAE,MAAF,CAAjB,CAAF;aAAZ,CAPhB,CAQN,KARM,CAQA,QARA,EAQU,UAAS,CAAT,EAAY;AACzB,oBAAG,EAAE,KAAF,IAAW,SAAX,EAAqB;AACpB,yBAAK,SAAL,CAAe,CAAf,EADoB;AAEpB,2BAAO,KAAP,CAFoB;iBAAxB;;AADyB,aAAZ,CARjB,CAxCsB;;AAwD1B,gBAAI,WAAW,KAAK,GAAL,CAAS,SAAT,CAAmB,aAAnB,EACV,MADU,CACH,MADG,EAEV,IAFU,CAEL,KAAK,KAAL,CAAW,KAAX,EAFK,EAGV,IAHU,CAGL,UAAS,CAAT,EAAY;AAAE,uBAAO,EAAE,KAAF,CAAT;aAAZ,CAHK,CAIV,IAJU,CAIL,GAJK,EAIA,UAAS,CAAT,EAAY;AAAE,uBAAQ,EAAE,MAAF,CAAS,CAAT,GAAa,CAAC,EAAE,MAAF,CAAS,CAAT,GAAa,EAAE,MAAF,CAAS,CAAT,CAAd,GAA4B,GAA5B,CAAvB;aAAZ,CAJA,CAKV,IALU,CAKL,GALK,EAKA,UAAS,CAAT,EAAY;AAAE,uBAAQ,EAAE,MAAF,CAAS,CAAT,GAAa,CAAC,EAAE,MAAF,CAAS,CAAT,GAAa,EAAE,MAAF,CAAS,CAAT,CAAd,GAA4B,GAA5B,CAAvB;aAAZ,CALA,CAMV,IANU,CAML,IANK,EAMC,OAND,EAOV,IAPU,CAOL,aAPK,EAOU,OAPV,EAQV,EARU,CAQP,WARO,EAQM,UAAS,CAAT,EAAY;AACzB,oBAAI,UAAJ,GACK,QADL,CACc,GADd,EAEK,KAFL,CAEW,SAFX,EAEsB,EAFtB,EADyB;AAIzB,kBAAE,KAAF,GAAU,EAAV,CAJyB;AAKzB,oBAAG,EAAE,UAAF,IAAgB,SAAhB,EAA0B;AACzB,sBAAE,KAAF,GAAU,KAAK,SAAL,CAAe,EAAE,UAAF,EAAc,IAA7B,EAAmC,CAAnC,EAAsC,QAAtC,GAAiD,OAAjD,CAAyD,KAAzD,EAA+D,MAA/D,EAAuE,OAAvE,CAA+E,KAA/E,EAAqF,EAArF,EAAyF,OAAzF,CAAiG,KAAjG,EAAuG,EAAvG,EAA2G,OAA3G,CAAmH,KAAnH,EAAyH,EAAzH,EAA6H,OAA7H,CAAqI,KAArI,EAA2I,EAA3I,EAA+I,OAA/I,CAAuJ,IAAvJ,EAA4J,EAA5J,CAAV,CADyB;iBAA7B;AAGA,oBAAI,IAAJ,CAAS,WAAW,EAAE,KAAF,GAAU,WAArB,GAAoC,EAAE,KAAF,GAAU,MAA9C,CAAT,CACK,KADL,CACW,MADX,EACmB,EAAC,CAAG,KAAH,CAAS,KAAT,GAAkB,IAAnB,CADnB,CAEK,KAFL,CAEW,KAFX,EAEkB,EAAC,CAAG,KAAH,CAAS,KAAT,GAAiB,EAAjB,GAAuB,IAAxB,CAFlB,CARyB;aAAZ,CARN,CAoBV,EApBU,CAoBP,UApBO,EAoBK,UAAS,CAAT,EAAY;AACxB,oBAAI,UAAJ,GACK,QADL,CACc,GADd,EAEK,KAFL,CAEW,SAFX,EAEsB,CAFtB,EADwB;aAAZ,CApBhB,CAxDsB;;AAoF1B,gBAAI,OAAO,KAAK,GAAL,CAAS,SAAT,CAAmB,OAAnB,EACN,IADM,CACD,KAAK,KAAL,CAAW,KAAX,EADC,EAEN,KAFM,GAEE,MAFF,CAES,GAFT,EAGN,IAHM,CAGD,OAHC,EAGQ,MAHR,EAIN,IAJM,CAID,KAAK,KAAL,CAAW,IAAX,CAJN,CApFsB;;AA2F1B,iBAAK,MAAL,CAAY,QAAZ,EACK,IADL,CACU,OADV,EACmB,MADnB,EAEK,IAFL,CAEU,GAFV,EAEe,UAAS,CAAT,EAAW;AAAC,uBAAO,EAAP,CAAD;aAAX,CAFf,CAGK,EAHL,CAGQ,WAHR,EAGqB,UAAS,CAAT,EAAY;AACzB,oBAAI,UAAJ,GACK,QADL,CACc,GADd,EAEK,KAFL,CAEW,SAFX,EAEsB,EAFtB,EADyB;AAIzB,kBAAE,KAAF,GAAU,EAAV,CAJyB;AAKzB,oBAAG,EAAE,UAAF,IAAgB,SAAhB,EAA0B;AACzB,sBAAE,KAAF,GAAU,KAAK,SAAL,CAAe,EAAE,UAAF,EAAc,IAA7B,EAAmC,CAAnC,EAAsC,QAAtC,GAAiD,OAAjD,CAAyD,KAAzD,EAA+D,MAA/D,EAAuE,OAAvE,CAA+E,KAA/E,EAAqF,EAArF,EAAyF,OAAzF,CAAiG,KAAjG,EAAuG,EAAvG,EAA2G,OAA3G,CAAmH,KAAnH,EAAyH,EAAzH,EAA6H,OAA7H,CAAqI,KAArI,EAA2I,EAA3I,EAA+I,OAA/I,CAAuJ,IAAvJ,EAA4J,EAA5J,CAAV,CADyB;iBAA7B;;AAIA,oBAAI,IAAJ,CAAS,WAAW,EAAE,IAAF,GAAS,WAApB,GAAmC,EAAE,KAAF,GAAU,MAA7C,CAAT,CACK,KADL,CACW,MADX,EACmB,EAAC,CAAG,KAAH,CAAS,KAAT,GAAkB,IAAnB,CADnB,CAEK,KAFL,CAEW,KAFX,EAEkB,EAAC,CAAG,KAAH,CAAS,KAAT,GAAiB,EAAjB,GAAuB,IAAxB,CAFlB,CATyB;aAAZ,CAHrB,CAgBK,EAhBL,CAgBQ,UAhBR,EAgBoB,UAAS,CAAT,EAAY;AACxB,oBAAI,UAAJ,GACK,QADL,CACc,GADd,EAEK,KAFL,CAEW,SAFX,EAEsB,CAFtB,EADwB;aAAZ,CAhBpB,CAqBK,KArBL,CAqBW,MArBX,EAqBmB,UAAS,CAAT,EAAY;AACvB,oBAAG,EAAE,KAAF,IAAW,CAAX,EAAa;AACZ,yBAAK,SAAL,CAAe,CAAf,EADY;AAEZ,2BAAO,KAAP,CAFY;iBAAhB;;AAKA,uBAAO,KAAK,KAAL,CAAW,EAAE,KAAF,CAAlB,CANuB;aAAZ,CArBnB,CA6BK,IA7BL,CA6BU,KAAK,KAAL,CAAW,IAAX,CA7BV;;;;;;;;;;;;;;;;;;;AA3F0B,gBA4I1B,CAAK,MAAL,CAAY,MAAZ,EACK,IADL,CACU,IADV,EACgB,EADhB,EAEK,IAFL,CAEU,IAFV,EAEgB,OAFhB,EAGK,IAHL,CAGU,UAAS,CAAT,EAAY;AAAE,uBAAO,EAAE,WAAF,CAAT;aAAZ,CAHV,CA5I0B;;AAkJ1B,iBAAK,KAAL,CAAW,EAAX,CAAc,MAAd,EAAsB,YAAW;AAC7B,qBAAK,IAAL,CAAU,IAAV,EAAgB,UAAS,CAAT,EAAY;AAAE,2BAAO,EAAE,MAAF,CAAS,CAAT,CAAT;iBAAZ,CAAhB,CACK,IADL,CACU,IADV,EACgB,UAAS,CAAT,EAAY;AAAE,2BAAO,EAAE,MAAF,CAAS,CAAT,CAAT;iBAAZ,CADhB,CAEK,IAFL,CAEU,IAFV,EAEgB,UAAS,CAAT,EAAY;AAAE,2BAAO,EAAE,MAAF,CAAS,CAAT,CAAT;iBAAZ,CAFhB,CAGK,IAHL,CAGU,IAHV,EAGgB,UAAS,CAAT,EAAY;AAAE,2BAAO,EAAE,MAAF,CAAS,CAAT,CAAT;iBAAZ,CAHhB;;;;;;AAD6B,oBAU7B,CAAK,IAAL,CAAU,WAAV,EAAuB,UAAS,CAAT,EAAY;AAAE,2BAAO,eAAe,EAAE,CAAF,GAAM,GAArB,GAA2B,EAAE,CAAF,GAAM,GAAjC,CAAT;iBAAZ,CAAvB,CAV6B;;AAY7B,yBACK,IADL,CACU,GADV,EACe,UAAS,CAAT,EAAY;AAAE,2BAAQ,EAAE,MAAF,CAAS,CAAT,GAAa,CAAC,EAAE,MAAF,CAAS,CAAT,GAAa,EAAE,MAAF,CAAS,CAAT,CAAd,GAA4B,GAA5B,CAAvB;iBAAZ,CADf,CAEK,IAFL,CAEU,GAFV,EAEe,UAAS,CAAT,EAAY;AAAE,2BAAQ,EAAE,MAAF,CAAS,CAAT,GAAa,CAAC,EAAE,MAAF,CAAS,CAAT,GAAa,EAAE,MAAF,CAAS,CAAT,CAAd,GAA4B,GAA5B,CAAvB;iBAAZ,CAFf,CAZ6B;aAAX,CAAtB,CAlJ0B;SAAX;;;OAAnB;AAqKA;AAAY,8BAAY;;;AAGpB,gBAAI,QAAQ,GAAR;gBACA,SAAS,GAAT,CAJgB;;AAMpB,gBAAI,cAAc,IAAd,EACA,OADJ;;AAGA,gBAAI,QAAQ,UAAU,KAAV;;;AATQ,gBAYhB,MAAM,MAAN,KAAiB,CAAjB,EACA,OADJ;;;AAZoB,iBAgBpB,GAAQ,GAAG,GAAH,CAAO,MAAM,GAAN,CAAU,UAAS,CAAT,EAAY;AAAC,uBAAO,EAAE,CAAF,CAAR;aAAZ,CAAjB,CAAR,CAhBoB;AAiBpB,oBAAQ,GAAG,GAAH,CAAO,MAAM,GAAN,CAAU,UAAS,CAAT,EAAY;AAAC,uBAAO,EAAE,CAAF,CAAR;aAAZ,CAAjB,CAAR,CAjBoB;;AAmBpB,oBAAQ,GAAG,GAAH,CAAO,MAAM,GAAN,CAAU,UAAS,CAAT,EAAY;AAAC,uBAAO,EAAE,CAAF,CAAR;aAAZ,CAAjB,CAAR,CAnBoB;AAoBpB,oBAAQ,GAAG,GAAH,CAAO,MAAM,GAAN,CAAU,UAAS,CAAT,EAAY;AAAC,uBAAO,EAAE,CAAF,CAAR;aAAZ,CAAjB,CAAR;;;AApBoB,qBAwBpB,GAAY,QAAQ,KAAR,CAxBQ;AAyBpB,yBAAa,QAAQ,KAAR;;;AAzBO,uBA4BpB,GAAc,QAAQ,SAAR,CA5BM;AA6BpB,2BAAe,SAAS,UAAT;;;;AA7BK,qBAiCpB,GAAY,KAAK,GAAL,CAAS,WAAT,EAAsB,YAAtB,IAAsC,GAAtC;;;AAjCQ,yBAoCpB,GAAgB,YAAY,SAAZ,CApCI;AAqCpB,6BAAiB,aAAa,SAAb;;;AArCG,mBAwCpB,GAAU,CAAE,KAAF,GAAW,SAAX,GAAuB,CAAC,QAAQ,aAAR,CAAD,GAA0B,CAA1B,CAxCb;AAyCpB,sBAAU,CAAE,KAAF,GAAW,SAAX,GAAuB,CAAC,SAAS,cAAT,CAAD,GAA4B,CAA5B;;;AAzCb,gBA6CpB,CAAK,GAAL,CAAS,IAAT,CAAc,WAAd,EACI,eAAe,CAAC,OAAD,EAAU,OAAV,CAAf,GAAoC,GAApC,GAA0C,SAA1C,GAAsD,SAAtD,GAAkE,GAAlE,CADJ;;;;AA7CoB,gBAkDpB,CAAK,MAAL,CAAY,SAAZ,CAAsB,CAAC,OAAD,EAAU,OAAV,CAAtB,EAlDoB;AAmDpB,iBAAK,MAAL,CAAY,KAAZ,CAAkB,SAAlB,EAnDoB;SAAZ;;;OAAZ;AAqDA;AAAQ,2BAAW;AACf,uBAAW,GAAG,KAAH,CAAS,QAAT,IAAqB,GAAG,KAAH,CAAS,OAAT,CADjB;AAEf,sBAAU,GAAG,KAAH,CAAS,OAAT,CAFK;;AAIf,oBAAQ,GAAR,CAAY,UAAZ,EAAwB,GAAG,KAAH,CAAxB,CAJe;;AAMf,gBAAI,GAAG,KAAH,CAAS,OAAT,IAAoB,EAApB,EAAwB;;AACxB,qBAAK,UAAL,GADwB;aAA5B;SANI;;;OAAR;AAWA;AAAW,2BAAS,IAAT,EAAc;AACrB,gBAAI,WAAW,KAAK,GAAL,CAAS,SAAT,CAAmB,OAAnB,CAAX,CADiB;AAErB,gBAAI,WAAW,SAAS,MAAT,CAAgB,UAAU,CAAV,EAAa,CAAb,EAAgB;AAC3C,uBAAO,EAAE,EAAF,IAAQ,KAAK,EAAL;;AAD4B,aAAhB,CAA3B,CAFiB;AAMrB,qBAAS,OAAT,CAAiB,UAAS,CAAT,EAAW;AACxB,qBAAK,IAAI,CAAJ,EAAO,KAAK,EAAL,EAAS,GAArB,EAA0B;AACtB,sBAAE,EAAE,CAAF,CAAF,EAAQ,MAAR,CAAe,MAAf,EAAuB,GAAvB,EAA4B,MAA5B,CAAmC,MAAnC,EAA2C,GAA3C,EADsB;iBAA1B,CADwB;aAAX,CAAjB,CANqB;SAAd;;;OAAX;AAYA;AAAW,2BAAS,IAAT,EAAc;AACrB,gBAAI,WAAW,KAAK,GAAL,CAAS,SAAT,CAAmB,OAAnB,CAAX,CADiB;AAErB,gBAAI,WAAW,SAAS,MAAT,CAAgB,UAAU,CAAV,EAAa,CAAb,EAAgB;AAC3C,uBAAO,EAAE,EAAF,IAAQ,KAAK,EAAL;;AAD4B,aAAhB,CAA3B,CAFiB;AAMrB,qBAAS,OAAT,CAAiB,UAAS,CAAT,EAAW;AACpB,qBAAK,IAAI,CAAJ,EAAO,KAAK,EAAL,EAAS,GAArB,EAA0B;AACtB,sBAAE,EAAE,CAAF,CAAF,EAAQ,MAAR,CAAe,MAAf,EAAuB,GAAvB,EAA4B,MAA5B,CAAmC,MAAnC,EAA2C,GAA3C,EADsB;iBAA1B,CADoB;aAAX,CAAjB,CANqB;SAAd;;;OAAX;AAYA;AAAK,sBAAS,GAAT,EAAa;;AAEd,gBAAI,IAAJ,CAAS,IAAT,CAAc,IAAd,EAAoB,UAAS,CAAT,EAAY;AAAE,uBAAO,EAAE,MAAF,CAAS,CAAT,CAAT;aAAZ,CAApB,CACK,IADL,CACU,IADV,EACgB,UAAS,CAAT,EAAY;AAAE,uBAAO,EAAE,MAAF,CAAS,CAAT,CAAT;aAAZ,CADhB,CAEK,IAFL,CAEU,IAFV,EAEgB,UAAS,CAAT,EAAY;AAAE,uBAAO,EAAE,MAAF,CAAS,CAAT,CAAT;aAAZ,CAFhB,CAGK,IAHL,CAGU,IAHV,EAGgB,UAAS,CAAT,EAAY;AAAE,uBAAO,EAAE,MAAF,CAAS,CAAT,CAAT;aAAZ,CAHhB,CAFc;;AAOd,gBAAI,IAAJ,CAAS,IAAT,CAAc,WAAd,EAA2B,UAAS,CAAT,EAAY;AAAE,uBAAO,eAAe,EAAE,CAAF,GAAM,GAArB,GAA2B,EAAE,CAAF,GAAM,GAAjC,CAAT;aAAZ,CAA3B,CAPc;;AASd,gBAAI,QAAJ,CACK,IADL,CACU,GADV,EACe,UAAS,CAAT,EAAY;AAAE,uBAAQ,EAAE,MAAF,CAAS,CAAT,GAAa,CAAC,EAAE,MAAF,CAAS,CAAT,GAAa,EAAE,MAAF,CAAS,CAAT,CAAd,GAA4B,GAA5B,CAAvB;aAAZ,CADf,CAEK,IAFL,CAEU,GAFV,EAEe,UAAS,CAAT,EAAY;AAAE,uBAAQ,EAAE,MAAF,CAAS,CAAT,GAAa,CAAC,EAAE,MAAF,CAAS,CAAT,GAAa,EAAE,MAAF,CAAS,CAAT,CAAd,GAA4B,GAA5B,CAAvB;aAAZ,CAFf,CATc;SAAb;;;OAAL;CAlaJ;AAgbA,WAAW;AACP,UAAK,EAAL;AACA;AAAK,wBAAU;AACX,iBAAK,IAAL,GAAY,EAAG,OAAH,EAAa,kBAAb,CAAgC;AACxC,2BAAW,KAAX;AACA,4BAAY,KAAZ;AACA,kCAAkB,CAAC,EAAG,UAAH,CAAD,CAAlB;AACA,8BAAc,EAAd;AACA,8BAAc,kBAAd;AACA,2BAAW,mBAAX;AACA;AAAa,2CAAW;AACpB,4BAAI,QAAQ,UAAU,CAAV,CAAR;4BACA,mBAAmB,UAAU,CAAV,CAAnB;4BACA,QAAQ,UAAU,CAAV,CAAR;4BACA,UAAU,UAAU,CAAV,CAAV;4BACA,QAAQ,iBAAiB,IAAjB,CAAuB,UAAvB,EAAoC,IAApC,EAAR;4BACA,WAAW,MAAM,IAAN,CAAY,SAAZ,EAAwB,IAAxB,EAAX,CANgB;AAOpB,gCAAQ,GAAR,CAAY,SAAZ,EAPoB;AAQpB,gCAAQ,GAAR,CAAY,MAAM,CAAN,CAAZ,EARoB;AASpB,4BAAG,MAAM,CAAN,EAAS,IAAT,IAAiB,UAAjB,IAA+B,MAAM,CAAN,EAAS,KAAT,IAAkB,SAAlB,EAA4B;AAC1D,gCAAG,MAAM,KAAN,GAAc,CAAd,EAAgB;AACf,oCAAI,WAAW,EAAE,OAAF,EAAW,kBAAX,CAA8B,YAA9B,EAA4C,KAA5C,CAAX,CADW;AAEf,kCAAE,gBAAF,EAAoB,MAApB,GAFe;AAGf,yCAAS,OAAT,CAAiB,UAAS,CAAT,EAAW;AACxB,wCAAG,EAAE,UAAF,CAAa,SAAb,IAA0B,EAA1B,IAAgC,EAAE,UAAF,CAAa,SAAb,IAA0B,SAA1B,EACnC;AACI,0CAAE,aAAF,EAAiB,MAAjB,CAAwB,qBAAmB,EAAE,UAAF,CAAa,SAAb,GAAuB,WAA1C,CAAxB,CADJ;qCADA;iCADa,CAAjB,CAHe;AASf,kCAAE,aAAF,EAAiB,MAAjB,CAAwB,wBAAsB,QAAtB,GAA+B,OAA/B,CAAxB,CATe;6BAAnB;;AAYA,oCAAQ,GAAR,CAAY,YAAZ,EAAyB,MAAM,CAAN,EAAS,EAAT,CAAzB,CAb0D;AAc1D,gCAAI,YAAY,QAAQ,YAAR,CAAqB,MAAM,CAAN,EAAS,EAAT,CAAjC,CAdsD;AAe1D,oCAAQ,kBAAR,CAA2B,SAA3B;;;;;yBAfJ,MAsBK,IAAG,MAAM,IAAN,CAAW,QAAX,KAAwB,MAAxB,EAA+B;AAtBuB,AAuB1D,oCAAI,YAAY,QAAQ,oBAAR,CAA6B,MAAM,IAAN,CAAW,OAAX,CAA7B,CAAZ;;AAD+B,6BAAlC;;AA/Be,qBAAX;;;mBAAb;AAqCA;AAAkB,gDAAW;AACzB,4BAAI,QAAQ,UAAU,CAAV,CAAR;4BACA,mBAAmB,UAAU,CAAV,CAAnB;4BACA,QAAQ,UAAU,CAAV,CAAR;4BACA,UAAU,UAAU,CAAV,CAAV;4BACA,QAAQ,iBAAiB,IAAjB,CAAsB,UAAtB,EAAkC,IAAlC,EAAR;4BACA,WAAW,MAAM,IAAN,CAAW,SAAX,EAAsB,IAAtB,EAAX,CANqB;;AAQzB,gCAAQ,GAAR,CAAY,KAAZ,EARyB;AASzB,4BAAG,MAAM,IAAN,CAAW,QAAX,KAAwB,MAAxB,EAA+B;AAC9B,gCAAI,YAAY,QAAQ,oBAAR,CAA6B,MAAM,IAAN,CAAW,OAAX,CAA7B,CAAZ,CAD0B;AAE9B,oCAAQ,kBAAR,CAA2B,SAA3B,EAF8B;AAG9B,oCAAQ,GAAR,CAAY,MAAM,IAAN,CAAW,OAAX,CAAZ,EAH8B;yBAAlC;qBATc;;;mBAAlB;aA5CQ,CAAZ,CADW;SAAV;;;OAAL;CAFJ","file":"/client/lib/main.js.map","sourcesContent":["d3Graph = {\r\n    color:'',\r\n    zoomer:function(){\r\n        var width = 500,\r\n            height = 500;\r\n        var xScale = d3.scale.linear()\r\n            .domain([0,width]).range([0,width]);\r\n        var yScale = d3.scale.linear()\r\n            .domain([0,height]).range([0, height]);\r\n        return d3.behavior.zoom().\r\n        scaleExtent([0.1,10]).\r\n        x(xScale).\r\n        y(yScale).\r\n        on(\"zoomstart\", zoomstart).\r\n        on(\"zoom\", redraw);\r\n    },\r\n    svg:'',\r\n    force:'',\r\n    link:'',\r\n    node:'',\r\n    linkText:'',\r\n    graph:{\r\n        nodes:[],\r\n        links:[],\r\n    },\r\n    zoomstart:function () {\r\n        node.each(function(d) {\r\n            d.selected = false;\r\n            d.previouslySelected = false;\r\n        });\r\n        node.classed(\"selected\", false);\r\n    },\r\n    getGraphData:function(nodeId){\r\n\r\n        var invNodes = Inventory.find({ \"type\": \"instance\", $and: [ { \"host\": nodeId } ] });\r\n\r\n        var edges = [];\r\n        var nodes = [];\r\n\r\n        invNodes.forEach(function(n){\r\n            nodes =  n[\"Entities\"];\r\n            edges =  n[\"Relations\"];\r\n        });\r\n\r\n        nodes.forEach(function(n){\r\n            n.name = n.label;\r\n        });\r\n\r\n        var edges_new = [];\r\n        edges.forEach(function(e) {\r\n            var sourceNode = nodes.filter(function(n) { return n.id === e.from; })[0],\r\n                targetNode = nodes.filter(function(n) { return n.id === e.to; })[0];\r\n\r\n            edges_new.push({source: sourceNode, target: targetNode, value: 1,label: e.label,attributes: e.attributes});\r\n        });\r\n//any links with duplicate source and target get an incremented 'linknum'\r\n        for (var i=0; i<edges_new.length; i++) {\r\n            if (i != 0 &&\r\n                edges_new[i].source == edges_new[i-1].source &&\r\n                edges_new[i].target == edges_new[i-1].target) {\r\n                edges_new[i].linknum = edges_new[i-1].linknum + 1;\r\n            }\r\n            else {edges_new[i].linknum = 1;};\r\n        };\r\n        //var graph = {};\r\n        this.graph.nodes = nodes;\r\n        this.graph.links = edges_new;\r\n\r\n    },\r\n    getGraphDataByClique:function(nodeObjId){\r\n        var cliques = Cliques.find({ focal_point: new Mongo.ObjectID(nodeObjId) }).fetch();\r\n        var cliquesLinks = [];\r\n        var nodes = [];\r\n        var edges_new = [];\r\n\r\n        cliques.forEach(function(n){\r\n             cliquesLinks.push(n[\"link_id\"]);\r\n        });\r\n        var linksList = Links.find({ _id: {$in: cliquesLinks}}).fetch();\r\n        console.log(linksList);\r\n\r\n        linksList.forEach(function(linkItem){\r\n            nodes.push(linkItem[\"source\"]);\r\n            nodes.push(linkItem[\"target\"]);\r\n        });\r\n        var nodesList = Inventory.find({ _id: {$in: nodes}}).fetch();\r\n        linksList.forEach(function(linkItem){\r\n            var sourceNode = nodesList.filter(function(n) { return n._id._str === linkItem.source._str; })[0],\r\n                targetNode = nodesList.filter(function(n) { return n._id._str === linkItem.target._str; })[0];\r\n\r\n            edges_new.push({source: sourceNode, target: targetNode, value: 1,label: linkItem.link_name,attributes: linkItem});\r\n\r\n        });\r\n        nodesList.forEach(function(nodeItem){\r\n            nodeItem.attributes = [];\r\n            var attrHoverFields = NodeHoverAttr.find({ \"type\": nodeItem[\"type\"]}).fetch();\r\n            if(attrHoverFields.length){\r\n                attrHoverFields[0].attributes.forEach(function(field){\r\n                    if(nodeItem[field]){\r\n                        var object = {};\r\n                        object[field] = nodeItem[field];\r\n                        nodeItem.attributes.push(object);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n        this.graph.nodes = nodesList;\r\n        this.graph.links = edges_new;\r\n\r\n    },\r\n    creategraphdata: function (){\r\n        var self = this;\r\n        var width = 500,\r\n            height = 500;\r\n\r\n        this.color = d3.scale.category20();\r\n/*\r\n        this.svg = d3.select(\"#dgraphid\").append(\"svg\")\r\n            .attr(\"width\", \"100%\")\r\n            .attr(\"height\", \"100%\")\r\n            .attr(\"pointer-events\", \"all\")\r\n            //.attr('transform', 'translate(250,250) scale(0.3)')\r\n            .call(d3.behavior.zoom().on(\"zoom\", this.redraw))\r\n            .append('svg:g');\r\n\r\n        //.append(\"g\");\r\n\r\n        this.force = cola.d3adaptor().convergenceThreshold(0.1)\r\n            //.linkDistance(200)\r\n            .size([width, height]);\r\n*/\r\n        var focused = null;\r\n\r\n        this.force = cola.d3adaptor().convergenceThreshold(0.1)\r\n            //.linkDistance(200)\r\n            .size([width, height]);\r\n\r\n        var outer = d3.select(\"#dgraphid\")\r\n            .append(\"svg\")\r\n            .attr({ width: \"100%\", height: \"100%\", \"pointer-events\": \"all\" });\r\n\r\n        outer.append('rect')\r\n            .attr({ class: 'background', width: \"100%\", height: \"100%\" })\r\n            .call(d3.behavior.zoom().on(\"zoom\", function(d) {\r\n                d3Graph.svg.attr(\"transform\", \"translate(\" + d3.event.translate + \")\" + \" scale(\" + d3.event.scale + \")\");\r\n            }))\r\n            .on(\"mouseover\", function () { focused = this; });\r\n\r\n        d3.select(\"body\").on(\"keydown\", function () { d3.select(focused); /* then do something with it here */ });\r\n\r\n        this.svg = outer\r\n            .append('g')\r\n            .attr('transform', 'translate(250,250) scale(0.3)');\r\n\r\n    },\r\n    redraw: function(){\r\n        console.log(\"here\", d3.event.translate, d3.event.scale);\r\n\r\n        d3Graph.svg.attr(\"transform\",\r\n            \"translate(\" + d3.event.translate + \")\"\r\n            + \" scale(\" + d3.event.scale + \")\");\r\n\r\n    },\r\n\r\n    updateNetworkGraph:function (){\r\n        var self = this;\r\n\r\n        this.svg.selectAll('g').remove();\r\n        //this.svg.exit().remove();\r\n\r\n        var div = d3.select(\"body\").append(\"div\")\r\n            .attr(\"class\", \"tooltip\")\r\n            .style(\"opacity\", 0);\r\n\r\n        this.force\r\n            .nodes(this.graph.nodes)\r\n            .links(this.graph.links)\r\n            .symmetricDiffLinkLengths(250)\r\n            //.jaccardLinkLengths(300)\r\n            //.jaccardLinkLengths(80,0.7)\r\n            .handleDisconnected(true)\r\n            .avoidOverlaps(true)\r\n            .start(50, 100, 200);\r\n\r\n/*\r\n            this.force\r\n            .on(\"dragstart\", function (d) { d3.event.sourceEvent.stopPropagation(); d3.select(this).classed(\"dragging\", true); } )\r\n            .on(\"drag\", function (d) { d3.select(this).attr(\"cx\", d.x = d3.event.x).attr(\"cy\", d.y = d3.event.y); } )\r\n            .on(\"dragend\", function (d) { d3.select(this).classed(\"dragging\", false); });\r\n*/\r\n\r\n\r\n        // Define the div for the tooltip\r\n\r\n        //svg.exit().remove();\r\n        //graph.constraints = [{\"axis\":\"y\", \"left\":0, \"right\":1, \"gap\":25},];\r\n\r\n        //.start(10,15,20);\r\n        /*var path = svg.append(\"svg:g\")\r\n            .selectAll(\"path\")\r\n            .data(force.links())\r\n            .enter().append(\"svg:path\")\r\n            .attr(\"class\", \"link\");;\r\n        */\r\n        var link = this.svg.selectAll(\".link\")\r\n            .data(this.force.links())\r\n            .enter()\r\n            .append(\"g\")\r\n            .attr(\"class\", \"link-group\")\r\n            .append(\"line\")\r\n            .attr(\"class\", \"link\")\r\n            .style(\"stroke-width\", function(d) { return Math.sqrt(d.stroke); })\r\n            .style(\"stroke\", function(d) {\r\n                if(d.label == 'net-103'){\r\n                    self.blinkLink(d);\r\n                    return \"red\";\r\n                }\r\n                //return self.color(d.level);\r\n            });\r\n\r\n        var linkText = this.svg.selectAll(\".link-group\")\r\n            .append(\"text\")\r\n            .data(this.force.links())\r\n            .text(function(d) { return d.label })\r\n            .attr(\"x\", function(d) { return (d.source.x + (d.target.x - d.source.x) * 0.5); })\r\n            .attr(\"y\", function(d) { return (d.source.y + (d.target.y - d.source.y) * 0.5); })\r\n            .attr(\"dy\", \".25em\")\r\n            .attr(\"text-anchor\", \"right\")\r\n            .on(\"mouseover\", function(d) {\r\n                div.transition()\r\n                    .duration(200)\r\n                    .style(\"opacity\", .9);\r\n                d.title = \"\";\r\n                if(d.attributes != undefined){\r\n                    d.title = JSON.stringify(d.attributes, null, 4).toString().replace(/\\,/g,'<BR>').replace(/\\[/g,'').replace(/\\]/g,'').replace(/\\{/g,'').replace(/\\}/g,'').replace(/\"/g,'');\r\n                }\r\n                div.html(\"<p><u>\" + d.label + \"</u><br/>\"  + d.title + \"<p/>\")\r\n                    .style(\"left\", (d3.event.pageX) + \"px\")\r\n                    .style(\"top\", (d3.event.pageY - 28) + \"px\");\r\n            })\r\n            .on(\"mouseout\", function(d) {\r\n                div.transition()\r\n                    .duration(500)\r\n                    .style(\"opacity\", 0);\r\n            });\r\n\r\n\r\n\r\n        var node = this.svg.selectAll(\".node\")\r\n            .data(this.force.nodes())\r\n            .enter().append(\"g\")\r\n            .attr(\"class\", \"node\")\r\n            .call(this.force.drag);\r\n\r\n\r\n        node.append(\"circle\")\r\n            .attr(\"class\", \"node\")\r\n            .attr(\"r\", function(d){return 13;})\r\n            .on(\"mouseover\", function(d) {\r\n                div.transition()\r\n                    .duration(200)\r\n                    .style(\"opacity\", .9);\r\n                d.title = \"\";\r\n                if(d.attributes != undefined){\r\n                    d.title = JSON.stringify(d.attributes, null, 4).toString().replace(/\\,/g,'<BR>').replace(/\\[/g,'').replace(/\\]/g,'').replace(/\\{/g,'').replace(/\\}/g,'').replace(/\"/g,'');\r\n                }\r\n\r\n                div.html(\"<p><u>\" + d.name + \"</u><br/>\"  + d.title + \"<p/>\")\r\n                    .style(\"left\", (d3.event.pageX) + \"px\")\r\n                    .style(\"top\", (d3.event.pageY - 28) + \"px\");\r\n            })\r\n            .on(\"mouseout\", function(d) {\r\n                div.transition()\r\n                    .duration(500)\r\n                    .style(\"opacity\", 0);\r\n            })\r\n            .style(\"fill\", function(d) {\r\n                if(d.level == 2){\r\n                    self.blinkNode(d);\r\n                    return \"red\";\r\n                }\r\n\r\n                return self.color(d.group);\r\n            })\r\n            .call(this.force.drag);\r\n\r\n\r\n        /*\r\n                    .each(function() {\r\n                        var sel = d3.select(this);\r\n                        var state = false;\r\n                        sel.on('dblclick', function () {\r\n                            state = !state;\r\n                            if (state) {\r\n                                sel.style('fill', 'black');\r\n                            } else {\r\n                                sel.style('fill', function (d) {\r\n                                    return d.colr;\r\n                                });\r\n                            }\r\n                        });\r\n                    });\r\n        */\r\n\r\n        node.append(\"text\")\r\n            .attr(\"dx\", 14)\r\n            .attr(\"dy\", \".35em\")\r\n            .text(function(d) { return d.object_name});\r\n\r\n\r\n        this.force.on(\"tick\", function() {\r\n            link.attr(\"x1\", function(d) { return d.source.x; })\r\n                .attr(\"y1\", function(d) { return d.source.y; })\r\n                .attr(\"x2\", function(d) { return d.target.x; })\r\n                .attr(\"y2\", function(d) { return d.target.y; });\r\n/*\r\n                .attr(\"dr1\", function(d) { return 75/d.source.linknum; })\r\n                .attr(\"dr2\", function(d) { return 75/d.target.linknum; });\r\n*/\r\n\r\n            node.attr(\"transform\", function(d) { return \"translate(\" + d.x + \",\" + d.y + \")\"; });\r\n\r\n            linkText\r\n                .attr(\"x\", function(d) { return (d.source.x + (d.target.x - d.source.x) * 0.5); })\r\n                .attr(\"y\", function(d) { return (d.source.y + (d.target.y - d.source.y) * 0.5); });\r\n\r\n        });\r\n\r\n    },\r\n    centerview: function () {\r\n        // Center the view on the molecule(s) and scale it so that everything\r\n        // fits in the window\r\n        var width = 500,\r\n            height = 500;\r\n\r\n        if (nodeGraph === null)\r\n            return;\r\n\r\n        var nodes = nodeGraph.nodes;\r\n\r\n        //no molecules, nothing to do\r\n        if (nodes.length === 0)\r\n            return;\r\n\r\n        // Get the bounding box\r\n        min_x = d3.min(nodes.map(function(d) {return d.x;}));\r\n        min_y = d3.min(nodes.map(function(d) {return d.y;}));\r\n\r\n        max_x = d3.max(nodes.map(function(d) {return d.x;}));\r\n        max_y = d3.max(nodes.map(function(d) {return d.y;}));\r\n\r\n\r\n        // The width and the height of the graph\r\n        mol_width = max_x - min_x;\r\n        mol_height = max_y - min_y;\r\n\r\n        // how much larger the drawing area is than the width and the height\r\n        width_ratio = width / mol_width;\r\n        height_ratio = height / mol_height;\r\n\r\n        // we need to fit it in both directions, so we scale according to\r\n        // the direction in which we need to shrink the most\r\n        min_ratio = Math.min(width_ratio, height_ratio) * 0.8;\r\n\r\n        // the new dimensions of the molecule\r\n        new_mol_width = mol_width * min_ratio;\r\n        new_mol_height = mol_height * min_ratio;\r\n\r\n        // translate so that it's in the center of the window\r\n        x_trans = -(min_x) * min_ratio + (width - new_mol_width) / 2;\r\n        y_trans = -(min_y) * min_ratio + (height - new_mol_height) / 2;\r\n\r\n\r\n        // do the actual moving\r\n        this.svg.attr(\"transform\",\r\n            \"translate(\" + [x_trans, y_trans] + \")\" + \" scale(\" + min_ratio + \")\");\r\n\r\n        // tell the zoomer what we did so that next we zoom, it uses the\r\n        // transformation we entered here\r\n        this.zoomer.translate([x_trans, y_trans ]);\r\n        this.zoomer.scale(min_ratio);\r\n    },\r\n    keydown:function() {\r\n        shiftKey = d3.event.shiftKey || d3.event.metaKey;\r\n        ctrlKey = d3.event.ctrlKey;\r\n\r\n        console.log('d3.event', d3.event)\r\n\r\n        if (d3.event.keyCode == 67) {   //the 'c' key\r\n            this.centerview();\r\n        }\r\n\r\n    },\r\n    blinkNode: function(node){\r\n        var nodeList = this.svg.selectAll(\".node\");\r\n        var selected = nodeList.filter(function (d, i) {\r\n            return d.id == node.id;\r\n            //return d.name != findFromParent;\r\n        });\r\n        selected.forEach(function(n){\r\n            for (i = 0; i != 30; i++) {\r\n                $(n[1]).fadeTo('slow', 0.1).fadeTo('slow', 5.0)};\r\n            }\r\n        );\r\n    },\r\n    blinkLink: function(link){\r\n        var linkList = this.svg.selectAll(\".link\");\r\n        var selected = linkList.filter(function (d, i) {\r\n            return d.id == link.id;\r\n            //return d.name != findFromParent;\r\n        });\r\n        selected.forEach(function(n){\r\n                for (i = 0; i != 30; i++) {\r\n                    $(n[1]).fadeTo('slow', 0.1).fadeTo('slow', 5.0)};\r\n            }\r\n        );\r\n    },\r\n    tick:function(obj){\r\n\r\n        obj.link.attr(\"x1\", function(d) { return d.source.x; })\r\n            .attr(\"y1\", function(d) { return d.source.y; })\r\n            .attr(\"x2\", function(d) { return d.target.x; })\r\n            .attr(\"y2\", function(d) { return d.target.y; });\r\n\r\n        obj.node.attr(\"transform\", function(d) { return \"translate(\" + d.x + \",\" + d.y + \")\"; });\r\n\r\n        obj.linkText\r\n            .attr(\"x\", function(d) { return (d.source.x + (d.target.x - d.source.x) * 0.5); })\r\n            .attr(\"y\", function(d) { return (d.source.y + (d.target.y - d.source.y) * 0.5); });\r\n    }\r\n};\r\nmenuTree = {\r\n    menu:{},\r\n    init:function(){\r\n        this.memu = $( '#menu' ).multilevelpushmenu({\r\n            menuWidth: '20%',\r\n            menuHeight: '94%',\r\n            containersToPush: [$( '#pushobj' )],\r\n            overlapWidth: 40,\r\n            backItemIcon: 'fa fa-angle-left',\r\n            groupIcon: 'fa fa-angle-right',\r\n            onItemClick: function() {\r\n                var event = arguments[0],\r\n                    $menuLevelHolder = arguments[1],\r\n                    $item = arguments[2],\r\n                    options = arguments[3],\r\n                    title = $menuLevelHolder.find( 'h2:first' ).text(),\r\n                    itemName = $item.find( 'a:first' ).text();\r\n                console.log(arguments);\r\n                console.log($item[0]);\r\n                if($item[0].type == \"host_ref\" && $item[0].title == 'node-24'){\r\n                    if($item.level > 1){\r\n                        var itemList = $('#menu').multilevelpushmenu('pathtoroot', $item);\r\n                        $('.breadcrumb li').remove();\r\n                        itemList.forEach(function(e){\r\n                            if(e.firstChild.innerText != '' && e.firstChild.innerText != undefined)\r\n                            {\r\n                                $('.breadcrumb').append('<li><a href=\"#\">'+e.firstChild.innerText+'</a></li>');\r\n                            }\r\n                        });\r\n                        $('.breadcrumb').append('<li class=\"active\">'+itemName+'</li>');\r\n                    }\r\n\r\n                    Session.set('currNodeId',$item[0].id);\r\n                    var graphData = d3Graph.getGraphData($item[0].id);\r\n                    d3Graph.updateNetworkGraph(graphData);\r\n                    /*\r\n                     myfunc = Template.multilevelorig.__helpers.get(\"getNodeItems\");\r\n                     myfunc($item[0].id);\r\n                     */\r\n\r\n                }\r\n                else if($item.attr(\"clique\") == \"true\"){\r\n                    var graphData = d3Graph.getGraphDataByClique($item.attr(\"objId\"));\r\n                    //console.log($item[0].objId);\r\n                }\r\n                //console.log($item.find( 'a:first' ));\r\n            },\r\n            onGroupItemClick: function() {\r\n                var event = arguments[0],\r\n                    $menuLevelHolder = arguments[1],\r\n                    $item = arguments[2],\r\n                    options = arguments[3],\r\n                    title = $menuLevelHolder.find('h2:first').text(),\r\n                    itemName = $item.find('a:first').text();\r\n\r\n                console.log($item);\r\n                if($item.attr(\"clique\") == \"true\"){\r\n                    var graphData = d3Graph.getGraphDataByClique($item.attr(\"objId\"));\r\n                    d3Graph.updateNetworkGraph(graphData);\r\n                    console.log($item.attr(\"objId\"));\r\n                }\r\n            },\r\n            });\r\n    },\r\n};\r\n"]},"hash":"beeb288c566b02531f98893c8cccfc2a2d638503"}
