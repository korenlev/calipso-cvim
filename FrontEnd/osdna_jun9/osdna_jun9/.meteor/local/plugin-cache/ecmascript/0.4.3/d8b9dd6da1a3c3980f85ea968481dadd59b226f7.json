{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/client/home.js","filenameRelative":"/client/home.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/client/home.js.map","sourceFileName":"/client/home.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"home"},"ignored":false,"code":"Template.home.rendered = function () {\n    console.log(\"Home Render\");\n    //Router.current().render().data();\n};\nTemplate.topnavbarmenu.helpers({});\nTemplate.topnavbarmenu.rendered = function () {};\nTemplate.topnavbarmenu.events = {\n    /*\r\n        \"autocompleteselect input\": function(event, template, doc) {\r\n            console.log(\"selected \", doc);\r\n        },\r\n    */\n    /*\r\n        'keyup input#search': function () {\r\n            \r\n            /!*AutoCompletion.autocomplete({\r\n                element: 'input#search',       // DOM identifier for the element\r\n                collection: Inventory,// MeteorJS collection object\r\n                field: 'Entities',                    // Document field name to search for\r\n                limit: 10,                         // Max number of elements to show\r\n                sort: { id: 1 },              // Sort object to filter results with\r\n                filter: { \"host\": \"node-25\",\"type\": \"instance\" }});\r\n            //filter: { 'gender': 'female' }}); // Additional filtering*!/\r\n        },\r\n    */\n    \"keypress #search\": function () {\n        function keypressSearch(event, template) {\n            if (event.which === 13) {\n                var instance = Template.instance(),\n                    findFromParent = instance.$(event.target).val();\n                console.log(\"temp val is \" + findFromParent);\n\n                //var selectedVal = $('#search').val();\n                var node = svg.selectAll(\".node\");\n                if (findFromParent == \"none\") {\n                    node.style(\"stroke\", \"white\").style(\"stroke-width\", \"1\");\n                } else {\n                    var selected = node.filter(function (d, i) {\n                        return d.label.indexOf(findFromParent) < 0;\n                        //return d.name != findFromParent;\n                    });\n                    selected.style(\"opacity\", \"0\");\n                    var link = svg.selectAll(\".link\");\n                    link.style(\"opacity\", \"0\");\n                    d3.selectAll(\".node, .link\").transition().duration(5000).style(\"opacity\", 1);\n                }\n            }\n\n            //return Inventory.find({ \"type\": \"instance\", $and: [ { \"host\": Session.get('currNodeId')} ] }).fetch().map(function(it){ return it.name; });\n        }\n\n        return keypressSearch;\n    }()\n};\n\nTemplate.d3graph.rendered = function () {\n    d3Graph.creategraphdata();\n    //var graphData = getGraphData(\"node-25\");\n    //updateNetworkGraph(graphData);\n    var initgraph = true;\n    Tracker.autorun(function () {\n        var nodeId = Session.get('currNodeId');\n        var nodesXY = [];\n        if (nodeId) {\n            d3Graph.getGraphData(nodeId);\n            /*\r\n                        d3Graph.force.nodes().forEach(function(e){\r\n                            nodesXY.push({id:e.id,x:e.x,y:e.y});\r\n                            //graphData.nodes[e] = e.x;\r\n                            //graphData.nodes[] = e.y;\r\n                        });\r\n                        var i=0;\r\n                        graphData.nodes.forEach(function(e){\r\n                            if(e.id==nodesXY[i].id){\r\n                                e.x = nodesXY[i].x;\r\n                                e.y = nodesXY[i].y;\r\n                            }\r\n                            i++;\r\n                        });\r\n                        var j=0;\r\n                        graphData.links.forEach(function(e){\r\n                            if(e.source.id==nodesXY[j].id){\r\n                                e.source.x = nodesXY[j].x;\r\n                                e.source.y = nodesXY[j].y;\r\n                            }\r\n                            else if(e.target.id==nodesXY[j].id){\r\n                                e.target.x = nodesXY[j].x;\r\n                                e.target.y = nodesXY[j].y;\r\n                            }\r\n                            j++;\r\n                        });\r\n                        console.log(graphData.nodes);\r\n            */\n            //d3Graph.updateNetworkGraph(graphData);\n            if (!initgraph) {\n                //d3Graph.start();\n                d3Graph.updateNetworkGraph();\n            }\n        }\n        initgraph = false;\n    });\n};\nTemplate.multilevelorig.events = {\n    \"click a\": function () {\n        function clickA(event, template) {\n            //console.log(event.target.innerText);\n            $('#menu').multilevelpushmenu('expand', event.target.innerText);\n        }\n\n        return clickA;\n    }()\n};\n\nTemplate.multilevelorig.rendered = function () {\n    console.log(\"multilevelorig Render\");\n\n    //Router.current().render().data();\n    //Session.set(\"currEnv\",\"WebEX-Mirantis@Cisco\");\n    menuTree.init();\n\n    //Session.set(\"currEnv\",\"WebEX-Mirantis@Cisco\");\n\n    /*$('#menu').multilevelpushmenu('option', 'menuHeight', $(document).height());\r\n    $('#menu').multilevelpushmenu('redraw');\r\n    $(window).resize(function () {\r\n        $('#menu').multilevelpushmenu('option', 'menuHeight', $(document).height());\r\n        $('#menu').multilevelpushmenu('redraw');\r\n    });\r\n    */\n    /*\r\n        Meteor.setTimeout( function(){\r\n        },1000);\r\n    */\n\n    $(document).ready(function () {\n        // HTML markup implementation, overlap mode\n        /*\r\n                var nodesList = getGraphData(\"node-25\").nodes;\r\n                var nodesNames = [];\r\n                nodesList.forEach(function(n){\r\n                    nodesNames.push(n.label);\r\n                });\r\n                nodesNames = nodesNames.sort();\r\n                console.log(nodesNames);\r\n                $('#search').autocomplete({\r\n                    minLength: 0,\r\n                    source: nodesNames\r\n                });\r\n        */\n\n    });\n};\n\nTemplate.multilevelorig.helpers({\n    treeItems: function () {\n        function treeItems() {\n            //console.log(Inventory.find({parent_id: \"WebEX-Mirantis@Cisco\"}));\n            //return Inventory.find({parent_id: \"WebEX-Mirantis@Cisco\"});\n            /*\r\n                    var currEnv = Router.current().route.getName();\r\n                    console.log(\"*****\"+currEnv+\"*****\");\r\n            */\n            var controller = Iron.controller();\n            var envName = controller.state.get('envName');\n            return Inventory.find({ environment: envName, parent_id: envName });\n        }\n\n        return treeItems;\n    }(),\n    getNodeItems: function () {\n        function getNodeItems(nodeId) {\n            //console.log(nodeId);\n            //console.log(Inventory.find({parent_id: nodeId}));\n            return Inventory.find({ parent_id: nodeId });\n        }\n\n        return getNodeItems;\n    }()\n});\nTemplate.multilevelorigNodeTemplate.helpers({\n    hasClique: function () {\n        function hasClique() {\n            var controller = Iron.controller();\n            var envName = controller.state.get('envName');\n            if (Inventory.find({ parent_id: this.id, parent_type: this.type, environment: envName, clique: true, show_in_tree: true }).count() > 0) {\n                console.log(\"clique=True\");\n                return \"true\";\n            } else {\n                return \"false\";\n            }\n        }\n\n        return hasClique;\n    }(),\n    hasChildren: function () {\n        function hasChildren() {\n            var controller = Iron.controller();\n            var envName = controller.state.get('envName');\n            return Inventory.find({ parent_id: this.id, parent_type: this.type, environment: envName, show_in_tree: true }).count() > 0;\n        }\n\n        return hasChildren;\n    }(),\n    children: function () {\n        function children() {\n            var controller = Iron.controller();\n            var envName = controller.state.get('envName');\n            return Inventory.find({ parent_id: this.id, parent_type: this.type, environment: envName, show_in_tree: true });\n        }\n\n        return children;\n    }()\n});","ast":null,"map":{"version":3,"sources":["/client/home.js"],"names":[],"mappings":"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","file":"/client/home.js.map","sourcesContent":["Template.home.rendered = function () {\r\n    console.log(\"Home Render\");\r\n    //Router.current().render().data();\r\n};\r\nTemplate.topnavbarmenu.helpers({\r\n});\r\nTemplate.topnavbarmenu.rendered = function(){\r\n    \r\n};\r\nTemplate.topnavbarmenu.events = {\r\n/*\r\n    \"autocompleteselect input\": function(event, template, doc) {\r\n        console.log(\"selected \", doc);\r\n    },\r\n*/\r\n/*\r\n    'keyup input#search': function () {\r\n        \r\n        /!*AutoCompletion.autocomplete({\r\n            element: 'input#search',       // DOM identifier for the element\r\n            collection: Inventory,// MeteorJS collection object\r\n            field: 'Entities',                    // Document field name to search for\r\n            limit: 10,                         // Max number of elements to show\r\n            sort: { id: 1 },              // Sort object to filter results with\r\n            filter: { \"host\": \"node-25\",\"type\": \"instance\" }});\r\n        //filter: { 'gender': 'female' }}); // Additional filtering*!/\r\n    },\r\n*/\r\n    \"keypress #search\": function  (event,template) {\r\n        if (event.which === 13) {\r\n            var instance = Template.instance(),\r\n                findFromParent =  instance.$(event.target).val();\r\n            console.log(\"temp val is \" + findFromParent);\r\n\r\n            //var selectedVal = $('#search').val();\r\n            var node = svg.selectAll(\".node\");\r\n            if (findFromParent == \"none\") {\r\n                node.style(\"stroke\", \"white\").style(\"stroke-width\", \"1\");\r\n            } else {\r\n                var selected = node.filter(function (d, i) {\r\n                    return d.label.indexOf(findFromParent)<0;\r\n                    //return d.name != findFromParent;\r\n                });\r\n                selected.style(\"opacity\", \"0\");\r\n                var link = svg.selectAll(\".link\")\r\n                link.style(\"opacity\", \"0\");\r\n                d3.selectAll(\".node, .link\").transition()\r\n                    .duration(5000)\r\n                    .style(\"opacity\", 1);\r\n\r\n\r\n            }\r\n\r\n        }\r\n\r\n        //return Inventory.find({ \"type\": \"instance\", $and: [ { \"host\": Session.get('currNodeId')} ] }).fetch().map(function(it){ return it.name; });\r\n    },\r\n};\r\n\r\nTemplate.d3graph.rendered = function () {\r\n    d3Graph.creategraphdata();\r\n    //var graphData = getGraphData(\"node-25\");\r\n    //updateNetworkGraph(graphData);\r\n    var initgraph = true;\r\n    Tracker.autorun(function () {\r\n        var nodeId = Session.get('currNodeId');\r\n        var nodesXY = [];\r\n        if(nodeId){\r\n            d3Graph.getGraphData(nodeId);\r\n/*\r\n            d3Graph.force.nodes().forEach(function(e){\r\n                nodesXY.push({id:e.id,x:e.x,y:e.y});\r\n                //graphData.nodes[e] = e.x;\r\n                //graphData.nodes[] = e.y;\r\n            });\r\n            var i=0;\r\n            graphData.nodes.forEach(function(e){\r\n                if(e.id==nodesXY[i].id){\r\n                    e.x = nodesXY[i].x;\r\n                    e.y = nodesXY[i].y;\r\n                }\r\n                i++;\r\n            });\r\n            var j=0;\r\n            graphData.links.forEach(function(e){\r\n                if(e.source.id==nodesXY[j].id){\r\n                    e.source.x = nodesXY[j].x;\r\n                    e.source.y = nodesXY[j].y;\r\n                }\r\n                else if(e.target.id==nodesXY[j].id){\r\n                    e.target.x = nodesXY[j].x;\r\n                    e.target.y = nodesXY[j].y;\r\n                }\r\n                j++;\r\n            });\r\n            console.log(graphData.nodes);\r\n*/\r\n            //d3Graph.updateNetworkGraph(graphData);\r\n            if(!initgraph){\r\n                //d3Graph.start();\r\n                d3Graph.updateNetworkGraph();\r\n            }\r\n\r\n\r\n        }\r\n        initgraph = false;\r\n    });\r\n\r\n};\r\nTemplate.multilevelorig.events = {\r\n     \"click a\": function(event,template){\r\n     //console.log(event.target.innerText);\r\n        $( '#menu' ).multilevelpushmenu( 'expand' , event.target.innerText );\r\n     },\r\n};\r\n\r\n\r\nTemplate.multilevelorig.rendered = function(){\r\n    console.log(\"multilevelorig Render\");\r\n\r\n    //Router.current().render().data();\r\n    //Session.set(\"currEnv\",\"WebEX-Mirantis@Cisco\");\r\n    menuTree.init();\r\n\r\n    //Session.set(\"currEnv\",\"WebEX-Mirantis@Cisco\");\r\n\r\n    /*$('#menu').multilevelpushmenu('option', 'menuHeight', $(document).height());\r\n    $('#menu').multilevelpushmenu('redraw');\r\n    $(window).resize(function () {\r\n        $('#menu').multilevelpushmenu('option', 'menuHeight', $(document).height());\r\n        $('#menu').multilevelpushmenu('redraw');\r\n    });\r\n*/\r\n    /*\r\n        Meteor.setTimeout( function(){\r\n        },1000);\r\n    */\r\n\r\n    $(document).ready(function(){\r\n        // HTML markup implementation, overlap mode\r\n/*\r\n        var nodesList = getGraphData(\"node-25\").nodes;\r\n        var nodesNames = [];\r\n        nodesList.forEach(function(n){\r\n            nodesNames.push(n.label);\r\n        });\r\n        nodesNames = nodesNames.sort();\r\n        console.log(nodesNames);\r\n        $('#search').autocomplete({\r\n            minLength: 0,\r\n            source: nodesNames\r\n        });\r\n*/\r\n\r\n    });\r\n\r\n};\r\n\r\nTemplate.multilevelorig.helpers({\r\n    treeItems: function(){\r\n        //console.log(Inventory.find({parent_id: \"WebEX-Mirantis@Cisco\"}));\r\n        //return Inventory.find({parent_id: \"WebEX-Mirantis@Cisco\"});\r\n/*\r\n        var currEnv = Router.current().route.getName();\r\n        console.log(\"*****\"+currEnv+\"*****\");\r\n*/\r\n        var controller = Iron.controller();\r\n        var envName = controller.state.get('envName');\r\n        return Inventory.find({environment: envName,parent_id: envName});\r\n    },\r\n    getNodeItems: function(nodeId){\r\n        //console.log(nodeId);\r\n        //console.log(Inventory.find({parent_id: nodeId}));\r\n        return Inventory.find({parent_id: nodeId});\r\n    },\r\n});\r\nTemplate.multilevelorigNodeTemplate.helpers({\r\n    hasClique: function(){\r\n        var controller = Iron.controller();\r\n        var envName = controller.state.get('envName');\r\n        if(Inventory.find({parent_id: this.id, parent_type:this.type,environment: envName,clique:true,show_in_tree:true}).count() > 0){\r\n            console.log(\"clique=True\");\r\n            return \"true\";\r\n        }\r\n        else{\r\n            return \"false\";\r\n        }\r\n\r\n    },\r\n    hasChildren: function(){\r\n        var controller = Iron.controller();\r\n        var envName = controller.state.get('envName');\r\n        return Inventory.find({parent_id: this.id, parent_type:this.type,environment: envName,show_in_tree:true}).count() > 0;\r\n    },\r\n    children: function(){\r\n        var controller = Iron.controller();\r\n        var envName = controller.state.get('envName');\r\n        return Inventory.find({parent_id: this.id ,parent_type:this.type,environment: envName,show_in_tree:true});\r\n    }\r\n});\r\n\r\n"]},"hash":"d8b9dd6da1a3c3980f85ea968481dadd59b226f7"}
